// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id                     Int       @id @default(autoincrement())
  createdAt              DateTime  @default(now()) @map("created_at")
  updatedAt              DateTime  @updatedAt @map("updated_at")
  email                  String    @unique
  name                   String
  password               String
  profile_img            String?
  projects               Project[] @relation()
  api_key                Apikey?
  show_inactive_projects Boolean   @default(false)
}

model Project {
  id          Int      @id @default(autoincrement())
  createdAt   DateTime @default(now()) @map("created_at")
  updatedAt   DateTime @updatedAt @map("updated_at")
  name        String   @db.Citext
  owner       User     @relation(fields: [ownerId], references: [id])
  ownerId     Int
  github_url  String?
  language    String
  description String
  active      Boolean
  live_url    String?
  image_url   String   @default("https://res.cloudinary.com/practicaldev/image/fetch/s--qo_Wp38Z--/c_limit%2Cf_auto%2Cfl_progressive%2Cq_auto%2Cw_880/https://dev-to-uploads.s3.amazonaws.com/i/e0nl7ziy1la7bpwj7rsp.png")
}

model Apikey {
  id              Int      @id @default(autoincrement())
  createdAt       DateTime @default(now()) @map("created_at")
  updatedAt       DateTime @updatedAt @map("updated_at")
  key             String   @unique
  user            User     @relation(fields: [userId], references: [id])
  userId          Int      @unique
  authorized_urls String[]
}
